{% extends "basewithnav.html" %}
<!DOCTYPE html>
<html>

{%block content%}


    <article>
        <div class="cover">
            <div class="s_art" id="story"></div>
            <script type="text/babel">
                class Entry extends React.Component { constructor() { super(); } render() { var {title, pic, author, date, text} = this.props; return(
                <div>
                    <h1 className="story_title">{title}</h1>
                    <div className="profile-box">
                        <img className="author_pic img-circular" src={pic} height={24}/>
                        <div className="author_info">
                            <h1 className="author_name">{author}</h1>
                            <h1 className="date">{date}</h1>
                        </div>
                    </div>

                    <p className="story_text">{text}</p>
                </div>) }}; Entry.propTypes = { title: React.PropTypes.string.isRequired }; Entry.defaultProps = { title: "Title" };



              class Top_Stories extends React.Component{
                constructor(){
                  super ();
                }

                render (){
                  return(
                    <div>
                    <div className = "top_story_page">
                      <h1 className="top_story_header">Top Stories Today</h1>
                      <hr></hr>
                      </div>
                      <Entry title="The Second One" text="changed. "
                        author="{{firstname}} {{lastname}}" pic="../static/images/riff.jpg" date="July 17, 2016" />
                        </div>
                  )
                }
              }

              class DailyPrompt extends React.Component{
                constructor(){
                  super();
                }

                render(){
                  return(
                    <div>
                    <div className = "daily_prompt">
                      <h1 className = "daily">Prisoners won't try to excape if they don't even know they are in prison.</h1>
                      <hr></hr>
                    </div>
                    <Entry title="The Biggest One" text="He house was filled with tears of sadness, joy and laughter. Long hugs, intense and heartfelt kisses, jokes to cheer up the inevitability of a saddened mood. Chris sat on the couch, surrounded by his friends and his family, and he couldn't but smile. The melancholy of the situation weighed on him, and yet there was this feeling that he couldn't shake off. ''If we have to go, then this is a pretty decent way of going.'' The crash of the two planets had been predicted to happen at 5:55AM EST, 25th October 2015. The planet had come in NASA's sights roughly a month ago, and from that moment on everything changed. He house was filled with tears of sadness, joy and laughter. Long hugs, intense and heartfelt kisses, jokes to cheer up the inevitability of a saddened mood. Chris sat on the couch, surrounded by his friends and his family, and he couldn't but smile. The melancholy of the situation weighed on him, and yet there was this feeling that he couldn't shake off. ''If we have to go, then this is a pretty decent way of going.'' The crash of the two planets had been predicted to happen at 5:55AM EST, 25th October 2015. The planet had come in NASA's sights roughly a month ago, and from that moment on everything changed. He house was filled with tears of sadness, joy and laughter. Long hugs, intense and heartfelt kisses, jokes to cheer up the inevitability of a saddened mood. Chris sat on the couch, surrounded by his friends and his family, and he couldn't but smile. The melancholy of the situation weighed on him, and yet there was this feeling that he couldn't shake off. ''If we have to go, then this is a pretty decent way of going.'' The crash of the two planets had been predicted to happen at 5:55AM EST, 25th October 2015. The planet had come in NASA's sights roughly a month ago, and from that moment on everything changed. "
                    author="{{firstname}} {{lastname}}" pic="../static/images/riff.jpg" date="July 17, 2016" />
                    </div>

                  )
                }

              }

              class Story extends React.Component {
                constructor(){
                  super();
                  this.state = {topStories:false};
                  this.handleStories = this.handleStories.bind(this);
                }

                handleStories(){
                  this.setState({topStories: !this.state.topStories});
                }

                dailyTop(number){
                  if(number == 1 ){
                    return(<DailyPrompt/>)
                  }
                  else if (number == 0) {
                    return(
                      <Top_Stories/>)
                  }
                }

                render() {
                  const textStory = this.state.topStories? 'Top Stories' :'Daily Prompt';
                  var mode = this.state.topStories? 0 : 1;
                  return(
                    <div className = "s-tog">
                      <div onClick={this.handleStories}>
                      </div>
                        {this.dailyTop(mode)}
                    </div>
                  )
                }
              };
              ReactDOM.render(<Story/>,document.getElementById('story'))

            </script>
          </article>


            <section>
              <div class="cover-comments">
                <div id="rct"></div>
                <script type="text/babel">

                    class CommentBox extends React.Component {
                      constructor(){
                        super();
                      }

                      getInititalState() {
                        return {data: []};
                      }

                      componentDidUpdate(){
                        return false;
                      }

                      render(){
                      return(
                        <div className="commentBox">
                        <CommentList data={this.props.data} />
                        <CommentForm />
                        </div>
                      );
                    }
                    }

                    class CommentForm extends React.Component{
                      constructor(){
                        super();
                      }

                      render(){
                        return(
                          <form className="commentForm">
                          <div contentEditable="true" className = "commentType" type="text" placeholder="Say something..." />
                          <input type="submit" value="Post" className = "commentSubmit" />
                          </form>
                        )
                      }
                    }

                    class CommentList extends React.Component{
                      constructor(){
                        super();
                      }

                      render(){
                        var commentNodes = this.props.data.map(function(comment){
                          return(
                            <Comment author=  {comment.author} key = {comment.id}>
                              {comment.text}
                              </Comment>
                          );
                        });
                        return(
                          <div className="commentList">
                          {commentNodes}
                          </div>
                        );
                      }
                    }

                    var data= [ {id: 1, author: "Pete Hunt", text: "Hopefully ur good at drawing"},{id: 2, author: "Jordan Walke", text: "This is terrible never write again pls"}];

                    class Comment extends React.Component{
                      constructor(){
                        super();
                      }

                      render(){
                        return(
                          <div className="comment">
                          <h2 className="commentAuthor">
                            {this.props.author}
                            </h2>
                          <h2 className= "commentText">
                            {this.props.children}
                            </h2>
                            <hr></hr>
                          </div>
                        )
                      }
                    }

                    class LikeButton extends React.Component {
                       constructor() {
                         super(); this.state = { liked: false, follow: false};
                         this.handleLike = this.handleLike.bind(this);
                          this.handleFollow = this.handleFollow.bind(this);
                           this.handleComment = this.handleComment.bind(this);
                    }

                    handleLike() { this.setState({liked: !this.state.liked}); }
                     handleFollow() { this.setState({follow: !this.state.follow}); }
                      handleComment(){ this.setState({comment: !this.state.comment}); }

                      commentOn(one){
                         if( one == 1){
                           return(
                           <CommentBox data = {data}/>)
                           console.log("working");
                         }
                        }

                       render() { const textLike = this.state.liked ? 'Unlike' : 'Like';
                        const textFollow= this.state.follow ? 'Unfollow' : 'Follow';
                        var commentOnOff = this.state.comment ? 1 : 0;
                        const textComment = "Comments"; return (
                          <div>
                    <div className="rct-1">
                        <div onClick={this.handleLike} className="like">
                            {textLike}
                        </div>
                        <div onClick={this.handleComment} className="comment-opening">
                            {textComment}
                        </div>
                    </div>
                    <div>
                    {this.commentOn(commentOnOff)}
                    </div>
                    </div>
                    ); } } ReactDOM.render(
                    <LikeButton />, document.getElementById('rct') );
                </script>

                <div id="content"></div>
                <script type="text/babel">

                </script>
              </div>
              </section>
{% endblock %}
</body>

</html>
